---
title: 自签名ssl生成
weight: 3
---

要保证Web浏览器到服务器的安全连接，HTTPS几乎是唯一选择。HTTPS其实就是HTTP over SSL，也就是让HTTP连接建立在SSL安全连接之上。

SSL使用证书来创建安全连接。有两种验证模式：

1. 仅客户端验证服务器的证书，客户端自己不提供证书；

2. 客户端和服务器都互相验证对方的证书。

一般第二种方式用于网上银行等安全性要求较高的网站，普通的Web网站只采用第一种方式。

- 客户端如何验证服务器的证书呢？

    服务器自己的证书必须经过某“权威”证书的签名，而这个“权威”证书又可能经过更权威的证书签名，这么一级一级追溯上去，最顶层那个最权威的证书就称为根证书。根证书直接内置在浏览器中，这样，浏览器就可以利用自己自带的根证书去验证某个服务器的证书是否有效。

    如果要提供一个有效的证书，服务器的证书必须从VeriSign这样的证书颁发机构签名。这样，浏览器就可以验证通过，否则，浏览器给出一个证书无效的警告。

    一般要求较高的内网环境，可以通过创建自签名SSL证书来加密通信。

下面简单介绍如何通过openssl创建一个自签名的SSL证书。

操作步骤：

- 创建Key；

- 创建签名请求；

- 将Key的口令移除；

- 用Key签名证书;

- 验证证书

    `openssl s_client -connect git.xinao.bid:443 -servername git.xinao.bid -CAfile xxx/xxx/my.cert`

>创建的签名请求的CN必须与域名完全一致，否则无法通过浏览器验证。
  